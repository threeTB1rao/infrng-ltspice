Version 4
SHEET 1 1476 1196
WIRE -1024 -704 -1392 -704
WIRE -656 -704 -1008 -704
WIRE -1120 -656 -1136 -656
WIRE -1024 -656 -1056 -656
WIRE -992 -656 -1008 -656
WIRE -896 -656 -928 -656
WIRE -1392 -592 -1392 -704
WIRE -1376 -592 -1392 -592
WIRE -1232 -592 -1248 -592
WIRE -1136 -592 -1136 -656
WIRE -1136 -592 -1152 -592
WIRE -1120 -592 -1136 -592
WIRE -1024 -592 -1008 -704
WIRE -1024 -592 -1024 -656
WIRE -1024 -592 -1040 -592
WIRE -1008 -592 -1024 -704
WIRE -1008 -592 -1008 -656
WIRE -992 -592 -1008 -592
WIRE -896 -592 -896 -656
WIRE -896 -592 -912 -592
WIRE -880 -592 -896 -592
WIRE -784 -592 -800 -592
WIRE -656 -592 -656 -704
WIRE -656 -592 -672 -592
WIRE -576 -560 -576 -592
WIRE -560 -560 -576 -560
WIRE -464 -560 -480 -560
WIRE -576 -544 -576 -560
WIRE -1232 -528 -1232 -544
WIRE -1136 -528 -1136 -592
WIRE -1104 -528 -1136 -528
WIRE -896 -528 -896 -592
WIRE -896 -528 -928 -528
WIRE -800 -528 -800 -544
WIRE -1024 -512 -1024 -592
WIRE -1024 -512 -1040 -512
WIRE -1008 -512 -1008 -592
WIRE -992 -512 -1008 -512
WIRE -1392 -496 -1392 -592
WIRE -1376 -496 -1392 -496
WIRE -1264 -496 -1296 -496
WIRE -1152 -496 -1152 -512
WIRE -1152 -496 -1200 -496
WIRE -1104 -496 -1152 -496
WIRE -880 -496 -880 -512
WIRE -880 -496 -928 -496
WIRE -832 -496 -880 -496
WIRE -752 -496 -768 -496
WIRE -656 -496 -656 -592
WIRE -656 -496 -672 -496
WIRE -1264 -464 -1280 -464
WIRE -832 -464 -848 -464
WIRE -1280 -448 -1280 -464
WIRE -848 -448 -848 -464
WIRE -576 -448 -576 -480
WIRE -1152 -368 -1152 -384
WIRE -880 -368 -880 -384
WIRE -656 -304 -656 -320
WIRE -640 -304 -656 -304
WIRE -608 -304 -608 -320
WIRE -576 -304 -576 -320
WIRE -576 -304 -608 -304
WIRE -1248 -288 -1264 -288
WIRE -976 -288 -992 -288
WIRE -656 -288 -656 -304
WIRE -576 -288 -576 -304
WIRE -1152 -272 -1152 -288
WIRE -1152 -272 -1184 -272
WIRE -1120 -272 -1120 -288
WIRE -1120 -272 -1152 -272
WIRE -880 -272 -880 -288
WIRE -880 -272 -912 -272
WIRE -848 -272 -848 -288
WIRE -848 -272 -880 -272
WIRE -1248 -256 -1264 -256
WIRE -976 -256 -992 -256
FLAG -640 -304 0
FLAG -656 -400 V+
IOPIN -656 -400 BiDir
FLAG -768 -256 0
FLAG -704 -336 CLK1
IOPIN -704 -336 BiDir
FLAG -704 -256 0
FLAG -768 -336 CLK2
IOPIN -768 -336 BiDir
FLAG -880 -432 0
FLAG -960 -480 0
FLAG -960 -544 V+
IOPIN -960 -544 BiDir
FLAG -1072 -480 0
FLAG -1072 -544 V+
IOPIN -1072 -544 BiDir
FLAG -1152 -432 0
FLAG -576 -400 V+
IOPIN -576 -400 BiDir
FLAG -576 -208 0
FLAG -608 -320 VRef
IOPIN -608 -320 BiDir
FLAG -1216 -240 0
FLAG -1120 -288 cmp1
IOPIN -1120 -288 BiDir
FLAG -1216 -304 V+
IOPIN -1216 -304 BiDir
FLAG -1152 -384 V+
IOPIN -1152 -384 BiDir
FLAG -1264 -288 VRef
IOPIN -1264 -288 BiDir
FLAG -1264 -256 Cap1
IOPIN -1264 -256 BiDir
FLAG -944 -240 0
FLAG -848 -288 cmp2
IOPIN -848 -288 BiDir
FLAG -944 -304 V+
IOPIN -944 -304 BiDir
FLAG -880 -384 V+
IOPIN -880 -384 BiDir
FLAG -992 -288 VRef
IOPIN -992 -288 BiDir
FLAG -992 -256 Cap2
IOPIN -992 -256 BiDir
FLAG -880 -512 Cap2
IOPIN -880 -512 BiDir
FLAG -1152 -512 Cap1
IOPIN -1152 -512 BiDir
FLAG -1248 -592 cmp1
IOPIN -1248 -592 BiDir
FLAG -784 -592 cmp2
IOPIN -784 -592 BiDir
FLAG -672 -592 MMod1
IOPIN -672 -592 BiDir
FLAG -1376 -592 MMod2
IOPIN -1376 -592 BiDir
FLAG -464 -560 Cmp1
IOPIN -464 -560 BiDir
FLAG -576 -592 AvgCmp1
IOPIN -576 -592 BiDir
FLAG -656 -208 V-
IOPIN -656 -208 BiDir
FLAG -576 -448 0
FLAG -1232 -432 0
FLAG -1232 -544 V+
IOPIN -1232 -544 BiDir
FLAG -800 -432 0
FLAG -800 -544 V+
IOPIN -800 -544 BiDir
FLAG -1280 -448 CLK1
IOPIN -1280 -448 BiDir
FLAG -848 -448 CLK2
IOPIN -848 -448 BiDir
SYMBOL voltage -656 -416 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -9 59 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5V
SYMBOL voltage -768 -352 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -9 59 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(5 0 0 {edge} {edge} {onTime} {period})
SYMBOL voltage -704 -352 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -9 59 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(5 0 {halfPeriod + phaseShift} {edge} {edge} {onTime} {period})
SYMBOL cap -896 -496 R0
WINDOW 0 24 8 Invisible 2
WINDOW 3 -24 47 Left 2
SYMATTR InstName C3
SYMATTR Value 100pF
SYMBOL res -896 -576 M270
WINDOW 0 32 56 Invisible 2
WINDOW 3 44 49 VBottom 2
SYMATTR InstName R10
SYMATTR Value {RGain}
SYMBOL res -1136 -608 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -3 64 VTop 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL cap -1168 -496 R0
WINDOW 0 24 8 Invisible 2
WINDOW 3 21 48 Left 2
SYMATTR InstName C4
SYMATTR Value 100pF
SYMBOL res -592 -416 R0
WINDOW 0 36 40 Invisible 2
WINDOW 3 17 47 Left 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -592 -304 R0
WINDOW 0 36 40 Invisible 2
WINDOW 3 -2 65 Left 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -1168 -384 R0
WINDOW 0 36 40 Invisible 2
WINDOW 3 0 66 Left 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res -896 -384 R0
WINDOW 0 36 40 Invisible 2
WINDOW 3 0 66 Left 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -1024 -608 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -12 64 VTop 2
SYMATTR InstName R6
SYMATTR Value {RGain}
SYMBOL res -784 -608 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -5 63 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -1280 -512 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -8 63 VTop 2
SYMATTR InstName R3
SYMATTR Value {ROn}
SYMBOL res -656 -512 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -8 63 VTop 2
SYMATTR InstName R11
SYMATTR Value {ROn}
SYMBOL voltage -656 -304 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -9 59 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 5V
SYMBOL res -464 -544 M270
WINDOW 0 32 56 Invisible 2
WINDOW 3 40 48 VBottom 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL cap -592 -544 R0
WINDOW 0 24 8 Invisible 2
WINDOW 3 20 46 Left 2
SYMATTR InstName C7
SYMATTR Value 1µF
SYMBOL CD4066 -1232 -480 R0
WINDOW 0 16 -64 Invisible 2
WINDOW 38 -11 37 Left 2
SYMATTR InstName U3
SYMBOL CD4066 -800 -480 R0
WINDOW 0 16 -64 Invisible 2
WINDOW 38 -11 37 Left 2
SYMATTR InstName U4
SYMBOL lm2903 -1216 -336 R0
WINDOW 0 16 32 Invisible 2
WINDOW 3 -28 63 Left 2
SYMATTR InstName U1
SYMBOL Opamps\\LT6220 -1072 -512 R0
WINDOW 0 16 -32 Invisible 2
WINDOW 3 -29 0 Left 2
SYMATTR InstName U5
SYMBOL Opamps\\LT6220 -960 -512 M0
WINDOW 0 16 -32 Invisible 2
WINDOW 3 -29 0 Left 2
SYMATTR InstName U6
SYMBOL cap -1056 -672 R90
WINDOW 0 0 32 Invisible 2
WINDOW 3 -13 31 VTop 2
SYMATTR InstName C1
SYMATTR Value {CModMul}
SYMBOL cap -928 -672 R90
WINDOW 0 0 32 Invisible 2
WINDOW 3 -13 31 VTop 2
SYMATTR InstName C5
SYMATTR Value {CModMul}
SYMBOL LM339 -944 -336 R0
WINDOW 0 16 32 Invisible 2
WINDOW 3 -27 64 Left 2
SYMATTR InstName U7
TEXT -872 -728 Left 2 !.tran 0 {recordTime} {startTime} 1ns uic
TEXT -1176 -824 Left 2 !.param freq=500kHz
TEXT -1176 -808 Left 2 !.param period=(1/freq)
TEXT -1176 -792 Left 2 !.param edge=(period/200)
TEXT -1176 -728 Left 2 !.param onTime=(duty*period- edge + 3*edge)
TEXT -1176 -744 Left 2 !.param recordTime=(1000*period)
TEXT -1176 -776 Left 2 !.param halfPeriod=(period/2}
TEXT -1176 -760 Left 2 !.param startTime=(1*period)
TEXT -1176 -840 Left 2 !.param duty=(0.5}
TEXT -872 -744 Left 2 !.inc ad822A.sub
TEXT -1400 -760 Left 2 !.param gain=(1.82)
TEXT -1400 -744 Left 2 !.param RGain=(gain-1)*10*1000
TEXT -1400 -728 Left 2 !.param phaseShift=(period*0)
TEXT -1400 -776 Left 2 !.param ROn=(0.1)
TEXT -872 -760 Left 2 !.inc cd4066.sub
TEXT -1400 -792 Left 2 !.param CModMul=(0.1pF)
